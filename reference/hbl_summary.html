<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Model summary — hbl_summary • historicalborrowlong</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Model summary — hbl_summary"><meta property="og:description" content="Summarize a fitted model in a table."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">historicalborrowlong</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/methods.html">Methods</a>
    </li>
    <li>
      <a href="../articles/usage.html">Usage</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/wlandau/historicalborrowlong/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Model summary</h1>
    <small class="dont-index">Source: <a href="https://github.com/wlandau/historicalborrowlong/blob/0.1.0/R/hbl_summary.R" class="external-link"><code>R/hbl_summary.R</code></a></small>
    <div class="hidden name"><code>hbl_summary.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Summarize a fitted model in a table.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">hbl_summary</span><span class="op">(</span></span>
<span>  <span class="va">mcmc</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"response"</span>,</span>
<span>  response_type <span class="op">=</span> <span class="st">"raw"</span>,</span>
<span>  study <span class="op">=</span> <span class="st">"study"</span>,</span>
<span>  study_reference <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">data</span><span class="op">[[</span><span class="va">study</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  group <span class="op">=</span> <span class="st">"group"</span>,</span>
<span>  group_reference <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">data</span><span class="op">[[</span><span class="va">group</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  patient <span class="op">=</span> <span class="st">"patient"</span>,</span>
<span>  rep <span class="op">=</span> <span class="st">"rep"</span>,</span>
<span>  rep_reference <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">data</span><span class="op">[[</span><span class="va">rep</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^covariate"</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  constraint <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  eoi <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  direction <span class="op">=</span> <span class="st">"&lt;"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-mcmc">mcmc<a class="anchor" aria-label="anchor" href="#arg-mcmc"></a></dt>
<dd><p>A wide data frame of posterior samples returned by
<code><a href="hbl_mcmc_hierarchical.html">hbl_mcmc_hierarchical()</a></code> or similar MCMC function.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Tidy data frame with one row per patient per rep,
indicator columns for the response variable,
study, group, patient, rep,
and covariates. All columns must be atomic vectors
(e.g. not lists).</p></dd>


<dt id="arg-response">response<a class="anchor" aria-label="anchor" href="#arg-response"></a></dt>
<dd><p>Character of length 1,
name of the column in <code>data</code> with the response/outcome variable.
<code>data[[response]]</code> must be a continuous variable,
and it <em>should</em> be the change from baseline of a
clinical endpoint of interest, as opposed to just
the raw response. Treatment differences
are computed directly from this scale, please supply
change from baseline unless you are absolutely certain
that treatment differences computed directly from
this quantity are clinically meaningful.</p></dd>


<dt id="arg-response-type">response_type<a class="anchor" aria-label="anchor" href="#arg-response-type"></a></dt>
<dd><p>Character of length 1: <code>"raw"</code> if the response
column in the data is the raw response, <code>"change"</code> if the response
columns is change from baseline. In the latter case, the <code>change_*</code>
columns in the output table are omitted because the response
is already a change from baseline. Must be one of <code>"raw"</code> or <code>"change"</code>.</p></dd>


<dt id="arg-study">study<a class="anchor" aria-label="anchor" href="#arg-study"></a></dt>
<dd><p>Character of length 1,
name of the column in <code>data</code> with the study ID.</p></dd>


<dt id="arg-study-reference">study_reference<a class="anchor" aria-label="anchor" href="#arg-study-reference"></a></dt>
<dd><p>Atomic of length 1,
element of the <code>study</code> column that indicates
the current study.
(The other studies are historical studies.)</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>Character of length 1,
name of the column in <code>data</code> with the group ID.</p></dd>


<dt id="arg-group-reference">group_reference<a class="anchor" aria-label="anchor" href="#arg-group-reference"></a></dt>
<dd><p>Atomic of length 1,
element of the <code>group</code> column that indicates
the control group.
(The other groups may be treatment groups.)</p></dd>


<dt id="arg-patient">patient<a class="anchor" aria-label="anchor" href="#arg-patient"></a></dt>
<dd><p>Character of length 1,
name of the column in <code>data</code> with the patient ID.</p></dd>


<dt id="arg-rep">rep<a class="anchor" aria-label="anchor" href="#arg-rep"></a></dt>
<dd><p>Character of length 1,
name of the column in <code>data</code> with the rep ID.</p></dd>


<dt id="arg-rep-reference">rep_reference<a class="anchor" aria-label="anchor" href="#arg-rep-reference"></a></dt>
<dd><p>Atomic of length 1,
element of the <code>rep</code> column that indicates
baseline, i.e. the first rep chronologically.
(The other reps may be post-baseline study visits or time points.)</p></dd>


<dt id="arg-covariates">covariates<a class="anchor" aria-label="anchor" href="#arg-covariates"></a></dt>
<dd><p>Character vector of column names
in <code>data</code> with the columns with baseline covariates.
These can be continuous, categorical, or binary.
Regardless, <code>historicalborrowlong</code> derives the appropriate
model matrix.</p>
<p>Each baseline covariate column must truly be a <em>baseline</em> covariate:
elements must be equal for all time points within each patient
(after the steps in the "Data processing" section).
In other words, covariates must not be time-varying.</p>
<p>A large number of covariates, or a large number of levels in a
categorical covariate, can severely slow down the computation.
Please consider carefully if you really need to include
such complicated baseline covariates.</p></dd>


<dt id="arg-constraint">constraint<a class="anchor" aria-label="anchor" href="#arg-constraint"></a></dt>
<dd><p>Logical of length 1, whether to pool all study arms
at baseline (first rep). Appropriate when the response is the raw
response (as opposed to change from baseline) and the first rep
(i.e. time point) is prior to treatment.</p></dd>


<dt id="arg-eoi">eoi<a class="anchor" aria-label="anchor" href="#arg-eoi"></a></dt>
<dd><p>Numeric of length at least 1,
vector of effects of interest (EOIs) for critical success factors (CSFs).</p></dd>


<dt id="arg-direction">direction<a class="anchor" aria-label="anchor" href="#arg-direction"></a></dt>
<dd><p>Character of length <code>length(eoi)</code> indicating how
to compare the treatment effect to each EOI. <code>"&gt;"</code> means
Prob(treatment effect &gt; EOI), and <code>"&lt;"</code> means
Prob(treatment effect &lt; EOI). All elements of <code>direction</code>
must be either <code>"&gt;"</code> or <code>"&lt;"</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A tidy data frame with one row per group (e.g. treatment arm)
and the columns in the following list. Unless otherwise specified,
the quantities are calculated at the group-by-rep level.
Some are calculated for the current (non-historical) study only,
while others pertain to the combined dataset which includes
all historical studies.</p><ul><li><p><code>group</code>: group index.</p></li>
<li><p><code>group_label</code>: original group label in the data.</p></li>
<li><p><code>rep</code>: rep index.</p></li>
<li><p><code>rep_label</code>: original rep label in the data.</p></li>
<li><p><code>data_mean</code>: observed mean of the response specific to the current
study.</p></li>
<li><p><code>data_sd</code>: observed standard deviation of the response
specific to the current study.</p></li>
<li><p><code>data_lower</code>: lower bound of a simple frequentist 95% confidence
interval of the observed data mean specific to the current study.</p></li>
<li><p><code>data_upper</code>: upper bound of a simple frequentist 95% confidence
interval of the observed data mean specific to the current study.</p></li>
<li><p><code>data_n</code>: number of non-missing observations in the combined dataset
(all studies).</p></li>
<li><p><code>data_N</code>: total number of observations (missing and non-missing)
in the combined dataset (all studies).</p></li>
<li><p><code>data_n_study_*</code>: number of non-missing observations in each study.
The suffixes of these column names are integer study indexes.
Call <code>dplyr::distinct(hbl_data(your_data), study, study_label)</code>
to see which study labels correspond to these integer indexes.</p></li>
<li><p><code>data_N_study_*</code>: total number of observations
(missing and non-missing) within each study.
The suffixes of these column names are integer study indexes.
Call <code>dplyr::distinct(hbl_data(your_data), study, study_label)</code>
to see which study labels correspond to these integer indexes.</p></li>
<li><p><code>response_mean</code>: Estimated posterior mean of the response
from the model. (Here, the response variable in the data
should be a change from baseline outcome.)
Specific to the current study.</p></li>
<li><p><code>response_sd</code>: Estimated posterior standard deviation of the mean
response from the model.
Specific to the current study.</p></li>
<li><p><code>response_variance</code>: Estimated posterior variance of the mean
response from the model.
Specific to the current study.</p></li>
<li><p><code>response_lower</code>: Lower bound of a 95% posterior interval on the mean
response from the model.
Specific to the current study.</p></li>
<li><p><code>response_upper</code>: Upper bound of a 95% posterior interval on the mean
response from the model.
Specific to the current study.</p></li>
<li><p><code>response_mean_mcse</code>: Monte Carlo standard error of <code>response_mean</code>.</p></li>
<li><p><code>response_sd_mcse</code>: Monte Carlo standard error of <code>response_sd</code>.</p></li>
<li><p><code>response_lower_mcse</code>: Monte Carlo standard error of <code>response_lower</code>.</p></li>
<li><p><code>response_upper_mcse</code>: Monte Carlo standard error of <code>response_upper</code>.</p></li>
<li><p><code>change_*</code>: same as the <code>response_*</code> columns, but for change
from baseline instead of the response. Not included if <code>response_type</code>
is <code>"change"</code> because in that case the response is already
change from baseline.</p></li>
<li><p><code>change_percent_*</code>: same as the <code>change_*</code> columns, but for the
<em>percent</em> change from baseline (from 0% to 100%).
Not included if <code>response_type</code>
is <code>"change"</code> because in that case the response is already
change from baseline.
Specific to the current study.</p></li>
<li><p><code>diff_*</code>: same as the <code>response_*</code> columns, but for treatment effect.</p></li>
<li><p><code>P(diff &gt; EOI)</code>, <code>P(diff &lt; EOI)</code>: CSF probabilities on the
treatment effect specified with the <code>eoi</code> and <code>direction</code>
arguments.
Specific to the current study.</p></li>
<li><p><code>effect_mean</code>: same as the <code>response_*</code> columns, but for the effect size
(diff / residual standard deviation).
Specific to the current study.</p></li>
<li><p><code>precision_ratio*</code>: same as the <code>response_*</code> columns,
but for the precision ratio, which compares within-study variance
to among-study variance. Only returned for the hierarchical model.
Specific to the current study.</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>The <code>hb_summary()</code> function post-processes the results from
the model. It estimates marginal means of the response,
treatment effect, and other quantities of interest.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other summary:
<code><a href="hbl_ess.html">hbl_ess</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"HBL_TEST"</span>, unset <span class="op">=</span> <span class="st">""</span><span class="op">)</span>, <span class="st">""</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="hbl_sim_pool.html">hbl_sim_pool</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_study <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  n_group <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  n_patient <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>  n_rep <span class="op">=</span> <span class="fl">3</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">$</span><span class="va">data</span></span></span>
<span class="r-in"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/capture.output.html" class="external-link">capture.output</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">mcmc</span> <span class="op">&lt;-</span> <span class="fu"><a href="hbl_mcmc_hierarchical.html">hbl_mcmc_hierarchical</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="va">data</span>,</span></span>
<span class="r-in"><span>      chains <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>      warmup <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>      iter <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>      seed <span class="op">=</span> <span class="fl">0</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">hbl_summary</span><span class="op">(</span><span class="va">mcmc</span>, <span class="va">data</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by William Michael Landau.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

